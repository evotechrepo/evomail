 
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>EVOTECH US L.L.C. Mail Subscribers • Admin</title>
  <link rel="icon" href="/evotechmail/assets/evo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="stylesheet" href="/evotechmail/css/admin.css">
  <script src="/evotechmail/js/common.js" defer></script>
  <script src="/evotechmail/js/auth.js" defer></script>
  <script src="/evotechmail/js/admin.js" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
        await ensureCurrentUser();
        // your mail page init can go here
    });
  </script>
</head>
<body>
  <div class="wrap">
    <header>
      <img src="/evotechmail/assets/evo.png" alt="">
      <h1>Admin</h1>
      <span id="status" class="muted" style="margin-left:auto"></span>
      <button id="dashback" class="btn btn--primary btn--sm" onclick="history.back()">Back</button>
    </header>

    <!-- HUB -->
    <section id="hub" class="hub">
      <button id="openHasher" class="big-tile">
        <div class="ico"><svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true"><path fill="#0b8a8f" d="M3 5h18v2H3zm0 6h12v2H3zm0 6h18v2H3z"/></svg></div>
        <div class="txt"><strong>Hasher</strong><span>Create secure password hashes</span></div>
      </button>
      <button id="openAddUser" class="big-tile">
        <div class="ico" style="background:#E6F4FF"><svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true"><path fill="#0b8a8f" d="M15 12a5 5 0 1 0-10 0 5 5 0 0 0 10 0zm2 1v-2h5v2h-5zm-2.5 5h-7c-2.21 0-4 1.79-4 4h15c0-2.21-1.79-4-4-4z"/></svg></div>
        <div class="txt"><strong>Add User</strong><span>Create a new user account</span></div>
      </button>
      <button id="openEditUser" class="big-tile">
        <div class="ico" style="background:#F3F7E9"><svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true"><path fill="#0b8a8f" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21.41 7.34a1.25 1.25 0 0 0 0-1.77l-2.98-2.98a1.25 1.25 0 0 0-1.77 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg></div>
        <div class="txt"><strong>Edit User</strong><span>Update display/role/active</span></div>
      </button>
      <!-- Reset Password -->
      <button id="openResetPwd" class="big-tile">
        <div class="ico" style="background:#FFF2F0">
          <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
            <path fill="#b91010" d="M12 1a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 10H6a6 6 0 1 1 6 6 6.1 6.1 0 0 1-3.74-1.28l-1.46 1.46A8 8 0 1 0 20 10h-2a6 6 0 0 1-6 6z"/>
            <path fill="#b91010" d="M14.5 12a2.5 2.5 0 1 0-4.2 1.8V16h3v-2.2c.8-.46 1.2-1.24 1.2-1.8z"/>
          </svg>
        </div>
        <div class="txt">
          <strong>Reset Password</strong>
          <span>Set a new password</span>
        </div>
      </button>
      <!-- Users List -->
      <button id="openUserList" class="big-tile">
        <div class="ico" style="background:#EEF7FF">
          <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
            <path fill="#0b58a8" d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V20h14v-3.5C15 14.17 10.33 13 8 13zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V20h7v-3.5c0-2.33-4.67-3.5-8-3.5z"/>
          </svg>
        </div>
        <div class="txt">
          <strong>Users List</strong>
          <span>View all users</span>
        </div>
      </button>
    </section>

    <!-- Hasher view -->
    <section id="hasherView" class="view" hidden>
      <div class="card">
        <div class="row">
          <button class="btn btn--sm" id="backFromHasher">← Back</button>
          <span class="muted" id="hStatus" style="margin-left:auto"></span>
        </div>
        <div class="row" style="gap:12px; margin-top:8px">
          <div style="flex:1 1 340px">
            <label for="pwd">Password</label>
            <div class="row" style="gap:8px">
              <input id="pwd" type="password" autocomplete="new-password" spellcheck="false" placeholder="Enter password">
              <button id="toggle" class="btn btn--sm" type="button" aria-pressed="false">Show</button>
            </div>
          </div>
          <div class="row" style="gap:8px">
            <button id="hashBtn" class="btn btn--primary" type="button">Generate hash</button>
            <button id="clearBtn" class="btn btn--sm" type="button">Clear</button>
          </div>
        </div>
      </div>

      <div class="card" id="outCard" hidden>
        <div class="row">
          <label style="margin:0">Hashed password</label>
          <span id="algo" class="muted" style="margin-left:auto"></span>
        </div>
        <div class="row" style="gap:8px">
          <input id="hashOut" class="mono" type="text" readonly aria-readonly="true" value="">
          <button id="copyBtn" class="btn btn--sm" type="button">Copy</button>
        </div>
        <div id="msg" class="muted"></div>
      </div>
    </section>

    <!-- Add User view -->
    <section id="addUserView" class="view" hidden>
      <div class="card">
        <div class="row">
          <button class="btn btn--sm" id="backFromUser">← Back</button>
          <span class="muted" id="uStatus" style="margin-left:auto"></span>
        </div>

        <div class="row" style="margin-top:8px">
          <div style="flex:1 1 280px">
            <label for="uEmail">Email</label>
            <input id="uEmail" type="email" autocomplete="off" placeholder="user@example.com">
          </div>
          <div style="flex:1 1 220px">
            <label for="uName">Display name (optional)</label>
            <input id="uName" type="text" autocomplete="off" placeholder="Jane Doe">
          </div>
        </div>

        <div class="row">
          <div style="flex:1 1 220px">
            <label for="uRole">Role</label>
            <select id="uRole">
              <option value="admin">Admin</option>
              <option value="staff">Staff</option>
            </select>
          </div>
          <div style="flex:0 0 200px; display:flex; align-items:flex-end">
            <label class="toggle">
              <input id="uActive" type="checkbox" checked>
              <span class="track"><span class="dot"></span></span>
              <span class="muted">Active</span>
            </label>
          </div>
        </div>

        <div class="row">
          <div style="flex:1 1 280px">
            <label for="uPwd">Password</label>
            <input id="uPwd" type="password" placeholder="Set password">
          </div>
          <div style="flex:1 1 280px">
            <label for="uPwd2">Confirm password</label>
            <input id="uPwd2" type="password" placeholder="Confirm password">
          </div>
        </div>

        <div class="row" style="margin-top:8px">
          <button id="uCreate" class="btn btn--primary">Create user</button>
          <button id="uClear" class="btn">Clear</button>
        </div>
      </div>
    </section>

    <!-- Edit User view -->
    <section id="editUserView" class="view" hidden>
      <div class="card">
        <div class="row">
          <button class="btn btn--sm" id="backFromEdit">← Back</button>
          <span class="muted" id="eStatus" style="margin-left:auto"></span>
        </div>

        <!-- Lookup -->
        <div class="row" style="margin-top:8px">
          <div style="flex:1 1 340px">
            <label for="eEmail">Find by email</label>
            <div class="row" style="gap:8px">
              <input id="eEmail" type="email" placeholder="user@example.com">
              <button id="eLoad" class="btn">Load</button>
            </div>
          </div>
        </div>

        <!-- Editor -->
        <div id="eForm" style="margin-top:10px" hidden>
          <div class="row">
            <div style="flex:1 1 280px">
              <label for="eDisp">Display name</label>
              <input id="eDisp" type="text" placeholder="Jane Doe">
            </div>
            <div style="flex:1 1 220px">
              <label for="eRole">Role</label>
              <select id="eRole">
                <option value="admin">Admin</option>
                <option value="staff">Staff</option>
              </select>
            </div>
            <div style="flex:0 0 220px; display:flex; align-items:flex-end">
              <label class="toggle">
                <input id="eActive" type="checkbox">
                <span class="track"><span class="dot"></span></span>
                <span class="muted">Active</span>
              </label>
            </div>
          </div>

          <div class="row" style="margin-top:8px">
            <div class="muted" id="eUserMeta"></div>
          </div>

          <div class="row" style="margin-top:8px">
            <button id="eSave" class="btn btn--primary">Save changes</button>
            <button id="eClear" class="btn">Close</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Reset Password view -->
    <section id="resetPwdView" class="view" hidden>
      <div class="card">
        <button id="backFromReset" class="btn btn--sm">← Back</button>
        <span id="rStatus" class="muted" style="margin-left:auto"></span>

        <div style="margin-top:8px">
          <label>Email</label>
          <input id="rEmail" type="email" placeholder="user@example.com">
          <button id="rLoad" class="btn">Load</button>
        </div>

        <div id="rForm" hidden style="margin-top:10px">
          <div id="rMeta" class="muted"></div>
          <label>New Password</label>
          <input id="rPwd" type="password">
          <label>Confirm Password</label>
          <input id="rPwd2" type="password">
          <button id="rSave" class="btn btn--primary">Reset password</button>
          <button id="rClear" class="btn">Clear</button>
        </div>
      </div>
    </section>

    <!-- Users List view -->
    <section id="userListView" class="view" hidden>
      <div class="card">
        <div class="row">
          <button class="btn btn--sm" id="backFromList">← Back</button>
          <span class="muted" id="lStatus" style="margin-left:auto"></span>
        </div>

        <!-- simple header row, no limit/offset -->
        <div class="list-head">
          <div class="muted" id="lCount"></div>
        </div>

        <div class="tbl-wrap">
          <table class="tbl" id="usersTbl" aria-label="Users">
            <thead>
              <tr>
                <th>Email</th>
                <th>Display name</th>
                <th>Role</th>
                <th>Active</th>
                <th>Last login</th>
                <th>Created</th>
              </tr>
            </thead>
            <tbody><!-- filled by JS --></tbody>
          </table>
        </div>
      </div>
    </section>


    <dialog id="alertModal" class="modal-overlay" aria-labelledby="alertTitle" aria-describedby="alertMsg">
        <div class="modal" role="document">
            <div class="modal__header">
            <span id="alertTitle">Notice</span>
            <button class="close-x" type="button" aria-label="Close">✕</button>
            </div>
            <div class="modal__body">
            <div style="display:flex; gap:10px; align-items:flex-start;">
                <!-- subtle info icon -->
                <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
                <circle cx="12" cy="12" r="10" fill="#E0F2F1"></circle>
                <text x="12" y="16" text-anchor="middle" font-size="12" fill="#006D75" font-weight="700">i</text>
                </svg>
                <div id="alertMsg" style="white-space:pre-wrap"></div>
            </div>
            </div>
            <div class="modal__footer" style="display:flex; gap:8px; justify-content:flex-end;">
            <button type="button" class="btn btn--primary" data-role="ok">OK</button>
            </div>
        </div>
      </dialog>

  </div>
</body>
</html>
